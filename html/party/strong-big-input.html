<!doctype html>
<html class="no-js">
<head>
    <meta charset="utf-8">
    <!--<meta http-equiv="X-UA-Compatible" content="IE=edge">-->
    <!--<meta name="description" content="">-->
    <!--<meta name="keywords" content="">-->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>三重一大</title>

    <!--&lt;!&ndash; Set render engine for 360 browser &ndash;&gt;-->
    <!--<meta name="renderer" content="webkit">-->


    <link rel="stylesheet" href="../../assets/css/amazeui.css">
    <link rel="stylesheet" href="../../assets/css/font-awesome.css">
    <link rel="stylesheet" href="../../assets/css/LCommon.css">
    <link rel="stylesheet" href="../../assets/css/sl.css">
    <link rel="stylesheet" href="../../assets/css/plugin/mvalidate/validate.css">
    <!--<link rel="stylesheet" href="../../assets/css/form.css">-->
    <script src="../../assets/js/jquery.min.js"></script>
    <script src="../../assets/js/amazeui.js"></script>
    <!--<script src="../../assets/js/plugin/validate/jquery-mvalidate.js" ></script>&lt;!&ndash;a要用到b中的方法，b必须先加载&ndash;&gt;-->
    <script src="../../assets/js/myFirst.js"></script>
    <!--<script src="../../assets/js/export.js"></script>-->

    <style>
        div{
            padding:0;

        }
        fieldset{
            padding:0
        }
        input{
            width:90%;
            background-color: #F4F4F4;
        }
    </style>
</head>
<body class="">
<div style="margin-top: 3rem;" id="main-content">
    <form id="strongBig" class="smart-form" novalidate="novalidate" action="" method="post" data-am-validator>
        <fieldset>
            <div class="am-g sl-border-bottom-1px-solid-E6E6E6 sl-padding-08rem-0rem">
                <div class="am-u-sm-4 am-u-md-4 am-u-lg-4 sl-flex-row-center-flex-start sl-padding-0rem-05rem">
                    <i class="fa fa-asterisk text-icon-color sl-margin-right-02rem " ></i>
                    登记名称
                </div>
                <div class="am-u-sm-8 am-u-md-8 am-u-lg-8 sl-flex-row-center-flex-start sl-padding-0rem-05rem">
                    <input type="text" name="registerName"  placeholder="请输入登记事宜名称" value="" required>
                </div>
            </div>
            <div class="am-g sl-border-bottom-1px-solid-E6E6E6 sl-padding-08rem-0rem">
                <div class="am-u-sm-4 am-u-md-4 am-u-lg-4 sl-flex-row-center-flex-start sl-padding-0rem-05rem">
                    <i class="fa fa-asterisk text-icon-color sl-margin-right-02rem" ></i>
                    会议类型
                </div>
                <div class="am-u-sm-8 am-u-md-8 am-u-lg-8 sl-flex-row-center-space-between sl-padding-0rem-05rem">
                    <input type="text" name="meetingType"  placeholder="请选择会议类型" value="" class="dict-data" readonly required>
                    <i class="fa fa-angle-right sl-icon-color-CACACA"></i>
                </div>
            </div>
            <div class="am-g sl-border-bottom-1px-solid-E6E6E6 sl-padding-08rem-0rem">
                <div class="am-u-sm-4 am-u-md-4 am-u-lg-4 sl-flex-row-center-flex-start sl-padding-0rem-05rem">
                    <i class="fa fa-asterisk text-icon-color sl-margin-right-02rem" ></i>
                    是否中心审核
                </div>
                <div class="am-u-sm-8 am-u-md-8 am-u-lg-8 sl-flex-row-center-space-between sl-padding-0rem-05rem">
                    <input type="text" name="isCenterAudit"  placeholder="请选择是否中心审核" value="" class="dict-data" readonly  required>
                    <i class="fa fa-angle-right sl-icon-color-CACACA"></i>
                </div>
                <!--<div class="am-u-sm-8 am-u-md-8 am-u-lg-8 sl-flex-row-center-flex-start sl-padding-0rem-05rem">-->
                    <!--<label class="sl-flex-row-center-center">-->
                        <!--<input type="radio" checked="checked" name="isCheck" value="1" >-->
                        <!--<span class="sl-margin-0px-5px">是</span>-->
                    <!--</label>-->
                    <!--<label class="sl-flex-row-center-center">-->
                        <!--<input type="radio"  name="isCheck" value="2" >-->
                        <!--<span class="sl-margin-0px-5px">否</span>-->
                    <!--</label>-->
                <!--</div>-->
            </div>
            <div class="am-g sl-border-bottom-1px-solid-E6E6E6 sl-padding-08rem-0rem">
                <div class="am-u-sm-4 am-u-md-4 am-u-lg-4 sl-flex-row-center-flex-start sl-padding-0rem-05rem">
                    <i class="fa fa-asterisk text-icon-color sl-margin-right-02rem " ></i>
                    备案
                </div>
                <div class="am-u-sm-8 am-u-md-8 am-u-lg-8 sl-flex-row-center-flex-start sl-padding-0rem-05rem">
                    <input type="text" name="putOnRecord"  placeholder="请输入备案" value="" required>
                </div>
            </div>
            <div class="am-g sl-border-bottom-1px-solid-E6E6E6 sl-padding-08rem-0rem">
                <div class="am-u-sm-4 am-u-md-4 am-u-lg-4 sl-flex-row-center-flex-start sl-padding-0rem-05rem">
                    <i class="fa fa-asterisk text-icon-color sl-margin-right-02rem " ></i>
                    结论
                </div>
                <div class="am-u-sm-8 am-u-md-8 am-u-lg-8 sl-flex-row-center-flex-start sl-padding-0rem-05rem">
                    <input type="text" name="conclusion"  placeholder="请输入结论" value="" >
                </div>
            </div>
            <div class="am-g sl-border-bottom-1px-solid-E6E6E6 sl-padding-08rem-0rem">
                <div class="am-u-sm-4 am-u-md-4 am-u-lg-4 sl-flex-row-center-flex-start sl-padding-0rem-05rem">
                    <i class="fa fa-asterisk text-icon-color sl-margin-right-02rem" ></i>
                    通知对象
                </div>
                <div class="am-u-sm-8 am-u-md-8 am-u-lg-8 sl-flex-row-center-space-between sl-padding-0rem-05rem">
                    <input type="text" name="informObject"  placeholder="请选择通知对象" value="" class="dict-data" readonly >
                    <i class="fa fa-angle-right sl-icon-color-CACACA"></i>
                </div>
            </div>
            <div class="am-g sl-border-bottom-1px-solid-E6E6E6 sl-padding-08rem-0rem">
                <div class="am-u-sm-4 am-u-md-4 am-u-lg-4 sl-flex-row-center-flex-start sl-padding-0rem-05rem">
                    <i class="fa fa-asterisk text-icon-color sl-margin-right-02rem" ></i>
                    相应会议记录
                </div>
                <div class="am-u-sm-8 am-u-md-8 am-u-lg-8 sl-flex-row-center-space-between sl-padding-0rem-05rem">
                    <div class="meeting-record" >请选择相应会议记录</div>
                    <i class="fa fa-angle-right sl-icon-color-CACACA"></i>
                    <input type="hidden" name="meetingRecord" id="meetingRecord" class="dict-data" value="">
                    <input type="hidden" name="meetingRecordId" id="meetingRecordId" value="">
                </div>
            </div>
            <div class="am-g sl-margin-top-10px sl-flex-row-center-center">
                <div class="am-u-sm-6 am-u-md-6 am-u-lg-6">
                    <div class=" am-form-file">
                        <button type="button" class="am-btn am-btn-danger am-btn-sm">
                            <i class="am-icon-cloud-upload"></i> 上传附件</button>
                        <input id="doc-form-file" type="file" multiple onchange="html5Upload()" name="relatedAccessory" readonly>
                        <input type="hidden" name="relatedAccessoryName">
                        <input type="hidden" name="relatedAccessoryId">
                    </div>
                </div>
                <div class="am-u-sm-6 am-u-md-6 am-u-lg-6 sl-flex-row-center-center sl-padding-0px">
                    <span class="" id="hintImage" style="display: none">点击文件删除文件、<br/>最多上传3个文件</span>
                </div>
            </div>
            <ul class="am-avg-sm-4 am-avg-md-4 am-avg-lg-4" id="result">

            </ul>
            <div class="sl-flex-row-center-flex-end" style="position: fixed;top: 0.84rem;right: 0.84rem;z-index: 10002">
                <button type="submit"  id="submitForm" class="sl-margin-right-1rem" style="color:white;background-color: #F14551;">发布</button>
                <button type="submit" class="sl-margin-right-1rem" style="color:white;background-color: #F14551;">存为草稿</button>
            </div>
        </fieldset>
    </form>
</div>
<script>
    $('form').submit(function () {
        $("input")
    })
    //将文件以DataURL形式读入页面
    function html5Upload() {
        var file;
        var fileReader;
        var fileTag = document.getElementById("doc-form-file").files;//每次点击按钮上传的图片个数
        var len = fileTag.length;
//        //判断是否是图片
//        for (var i = 0; i < len; i++) {
//            var simpleFile = fileTag[i];
//            if(!/image\/\w+/.test(simpleFile.type)){
//                alert("请确保文件类型为图像类型");
//                return false;
//            }
//        }
//        if(!/image\/\w+/.test(simpleFile.type)){
//            alert("请确保文件类型为图像类型");
//            return false;
//        }
        //一次性上传图片
        if(len > 3){
            alert("最多上传3个文件");
            return ;
        }
        //分多次上传图片
        var num = $("#result").children().length;
        if(num + len > 3){
            alert("最多上传3个文件");
            return;
        }


        //显示和隐藏提示信息
        if(len+num > 0){
            $("#hintImage").css('display','block');
        }else{
            $("#hintImage").css('display','none');
        }
        for (var i = 0; i < fileTag.length; i++) {
            file = fileTag[i];
            var name = file.name;
            var div = '<li style="width: 100%;" onclick="removeSelf(this)"><div  class="sl-flex-row-center-flex-start" style="border:3px solid #E1E1E1;background-color: #F6F6F8;padding: 0.3rem;margin: .3rem .6rem;"><i class="fa fa-ils fa-lg text-success" ></i><div style="color: black;">'+name+'</div></div></li>';
            $("#result").append(div);
            var l = $("#result").find('i').length;
//            alert("LLL:"+l);
            var n = '';
            $("#result").find('i').next().each(function (i,v) {
//                alert("III:"+i);
                if(l == i +1){
                    n += $(this).html();
                }else{
                    n += $(this).html()+",";
                }
            });
            sessionStorage.setItem('relatedAccessory',n);


        }
    }
    //点击图片，删除图片
    function removeSelf(p) {
        var name = '';
        var len = $(p).siblings('li').find('i').length;

        $(p).siblings('li').find('i').next().each(function (i,v) {
            if(len == i +1){
                name += $(this).html();
            }else{
                name += $(this).html()+",";
            }

        });
//        console.log("n:"+name+"l"+ $(p).siblings('li').length);
        $(p).remove();



         sessionStorage.setItem('relatedAccessory',name);
//        console.log("fName："+fName);
//        if(fName == null){
//            sessionStorage.setItem('relatedAccessory',name);
//        }else{
//            sessionStorage.setItem('relatedAccessory',fName+','+name);
//        }
        var num = $("#result").children();
        if(num.length > 0){
            $("#hintImage").css('display','block');
        }else{
            $("#hintImage").css('display','none');
        }
    }

</script>

</body>
</html>