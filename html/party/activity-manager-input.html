<!doctype html>
<html class="no-js">
<head>
    <meta charset="utf-8">
    <!--<meta http-equiv="X-UA-Compatible" content="IE=edge">-->
    <!--<meta name="description" content="">-->
    <!--<meta name="keywords" content="">-->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>新建活动管理</title>

    <!--&lt;!&ndash; Set render engine for 360 browser &ndash;&gt;-->
    <!--<meta name="renderer" content="webkit">-->


    <link rel="stylesheet" href="../../assets/css/amazeui.css">
    <link rel="stylesheet" href="../../assets/css/LCommon.css">
    <link rel="stylesheet" href="../../assets/css/sl.css">
    <script src="../../assets/js/jquery.js"></script>
    <script src="../../assets/js/amazeui.js"></script>
    <script src="../../assets/js/myFirst.js"></script>
    <style>
        #vld-tooltip {
            position: absolute;
            z-index: 1000;
            padding: 5px 10px;
            background: #F37B1D;
            min-width: 150px;
            color: #fff;
            transition: all 0.15s;
            box-shadow: 0 0 5px rgba(0,0,0,.15);
            display: none;
        }

        #vld-tooltip:before {
            position: absolute;
            top: -8px;
            left: 50%;
            width: 0;
            height: 0;
            margin-left: -8px;
            content: "";
            border-width: 0 8px 8px;
            border-color: transparent transparent #F37B1D;
            border-style: none inset solid;
        }
    </style>
    <style>
        input{
            width:90%;
            background-color: #F4F4F4;
            border: 0px;
        }
        button{
            border: 0px;
        }
    </style>
</head>
<body class="">
<div class="top-div">
    <div class="sl-flex-row-center-space-between sl-background-color-red top-info sl-font-color-white" >
        <a href="party.html" onclick="destroyValidator()"><i class="am-icon-angle-left am-icon-sm" style="margin-left: 0.5rem;color: white;"></i></a>
    </div>
</div>
<div style="margin-top: 3rem;" id="main-content">
    <form id="strongBig" class=""  action="" method="post">
        <fieldset>
            <div class="am-g sl-border-bottom-1px-solid-E6E6E6  am-form-group" style="margin-top: 1.5rem;">
                <div class="am-u-sm-4 am-u-md-4 am-u-lg-4 sl-flex-row-center-flex-start sl-padding-0rem-05rem">
                    <i class="am-icon-asterisk text-icon-color sl-margin-right-02rem"></i>
                    活动类型
                </div>
                <div class="am-u-sm-8 am-u-md-8 am-u-lg-8 sl-flex-row-center-space-between sl-padding-0rem-05rem">
                    <input type="text" name="activityType"  placeholder="请选择活动类型" value="" class="dict-data" readonly required>
                    <i class="am-icon-angle-right sl-icon-color-CACACA"></i>
                </div>
            </div>
            <div class="am-g sl-border-bottom-1px-solid-E6E6E6  am-form-group">
                <div class="am-u-sm-4 am-u-md-4 am-u-lg-4 sl-flex-row-center-flex-start sl-padding-0rem-05rem">
                    <i class="am-icon-asterisk text-icon-color sl-margin-right-02rem"></i>
                    是否使用党费
                </div>
                <div class="am-u-sm-8 am-u-md-8 am-u-lg-8 sl-flex-row-center-space-between sl-padding-0rem-05rem">
                    <input type="text" name="isUseGovMoney"  placeholder="请选择是否使用党费" value="" class="dict-data" readonly  required>
                    <i class="am-icon-angle-right sl-icon-color-CACACA"></i>
                </div>
            </div>
            <div class="am-g sl-border-bottom-1px-solid-E6E6E6 am-form-group">
                <div class="am-u-sm-4 am-u-md-4 am-u-lg-4 sl-flex-row-center-flex-start sl-padding-0rem-05rem">
                    <i class="am-icon-asterisk text-icon-color sl-margin-right-02rem"></i>
                    活动支部
                </div>
                <div class="am-u-sm-8 am-u-md-8 am-u-lg-8 sl-flex-row-center-space-between sl-padding-0rem-05rem">
                    <input type="text" name="activityBranch"  placeholder="请输入活动支部" value="" class="dict-data" required readonly>
                    <i class="am-icon-angle-right sl-icon-color-CACACA"></i>
                </div>
            </div>
            <div class="am-g sl-border-bottom-1px-solid-E6E6E6 am-form-group">
                <div class="am-u-sm-4 am-u-md-4 am-u-lg-4 sl-flex-row-center-flex-start sl-padding-0rem-05rem">
                    <i class="am-icon-asterisk text-icon-color sl-margin-right-02rem"></i>
                    活动费用
                </div>
                <div class="am-u-sm-8 am-u-md-8 am-u-lg-8 sl-flex-row-center-flex-start sl-padding-0rem-05rem">
                    <input type="number" name="activityMoney"  placeholder="请输入活动费用" value="" required min="0" max="20">
                </div>
            </div>
            <div class="am-g sl-border-bottom-1px-solid-E6E6E6 am-form-group">
                <div class="am-u-sm-4 am-u-md-4 am-u-lg-4 sl-flex-row-center-flex-start sl-padding-0rem-05rem">
                    <i class="am-icon-asterisk text-icon-color sl-margin-right-02rem"></i>
                    可支配金额
                </div>
                <div class="am-u-sm-8 am-u-md-8 am-u-lg-8 sl-flex-row-center-space-between sl-padding-0rem-05rem">
                    <input type="number" name="canUseMoney"  placeholder="自动计算" value="" readonly>

                </div>
            </div>
            <div class="am-g sl-border-bottom-1px-solid-E6E6E6 am-form-group">
                <div class="am-u-sm-4 am-u-md-4 am-u-lg-4 sl-flex-row-center-flex-start sl-padding-0rem-05rem">
                    <i class="am-icon-asterisk text-icon-color sl-margin-right-02rem"></i>
                    相应会议记录
                </div>
                <div class="am-u-sm-8 am-u-md-8 am-u-lg-8 sl-flex-row-center-space-between sl-padding-0rem-05rem">
                    <!--<div class="meeting-record" >请选择相应会议记录</div>-->
                    <input type="text" name="meetingRecord" id="meetingRecord" class="dict-data" placeholder="请选择相应会议记录" value="" required readonly>
                    <!--<input type="hidden" name="meetingRecordId" id="meetingRecordId" value="">-->
                    <i class="am-icon-angle-right sl-icon-color-CACACA"></i>
                </div>
            </div>
            <div class="sl-flex-row-center-flex-end" style="position: fixed;top: 0.84rem;right: 0.84rem;z-index: 10002">
                <button type="submit"  id="submitForm" class="sl-margin-right-1rem" style="color:white;background-color: #F14551;">发布</button>
                <button type="submit" class="sl-margin-right-1rem" style="color:white;background-color: #F14551;">存为草稿</button>
            </div>
        </fieldset>
    </form>
</div>
<div data-am-widget="navbar" class="am-navbar am-cf am-navbar-default "
     id="">
    <ul class="am-navbar-nav am-cf am-avg-sm-2">
        <li >
            <a href="#" class="" style="color: red">
                <span class="am-icon-plus"></span>
                <span class="am-navbar-label">新建活动管理</span>
            </a>
        </li>
        <li >
            <a href="activity-manager-checkList.html">
                <span class="am-icon-check"></span>
                <span class="am-navbar-label">审批活动管理</span>
            </a>
        </li>
    </ul>
</div>
<script>
    //全局变量
    var rem =new Rem();
    var oneOrMany=['1','0','0','1'];
    //获取dict数据
    $(function () {
        var arr = ['activityType','isUseGovMoney','activityBranch','meetingRecord'];
        for(var i =0;i < arr.length; i++){
            if(arr[i] === 'isUseGovMoney' && sessionStorage.getItem(arr[i]) === '是'){
                $("input[name=activityMoney]").parents('div.am-g').css('display','block');
                $("input[name=canUseMoney]").parents('div.am-g').css('display','block');
            }else if(arr[i] === 'isUseGovMoney' && sessionStorage.getItem(arr[i]) === '否'){
                $("input[name=activityMoney]").parents('div.am-g').css('display','none');
                $("input[name=canUseMoney]").parents('div.am-g').css('display','none');
            }
            $('input[name="'+arr[i]+'"]').val(sessionStorage.getItem(arr[i]));
        }

    });

    //设置dict条件
    $("div.am-g").click(function () {
        var eleInput = $(this).find('input.dict-data').parent().get(0);//DOM元素对象
        // console.log("len:"+$('input.dict-data').parent().length);
        $('input.dict-data').parent().each(function (i,v) {
            if(eleInput == v){
                sessionStorage.setItem('val',$(this).find('input.dict-data').val());
                sessionStorage.setItem('fieldName',$(this).find('input.dict-data').prop('name'));
                if(parseInt(oneOrMany[i]) === 0){
                    sessionStorage.setItem('type','radio');
                }else{
                    sessionStorage.setItem('type','checkbox');
                }
                location.href='../dict-search.html'
            }
        });
    })

    //validator
    $(function() {
        $('#strongBig').validator({
            onValid: function(validity) {
            },
            onInValid: function(validity) {
                var $field = $(validity.field);
                var $group = $field.closest('.am-form-group');
                // 使用自定义的提示信息 或 插件内置的提示信息
                var msg='';
                if(validity.valueMissing){
                    msg = $field.prop('placeholder');
                }
                if(validity.typeMismatch){
                    msg='你输入的不是数字';
                }
                if(validity.rangeUnderflow || validity.rangeOverflow){
                    msg = this.getValidationMessage(validity);
                }
                rem.alertInfo(msg);
            },
            submit: function (e) {
                var formValidity = this.isFormValid();
                if(typeof formValidity === 'boolean'){
                    if(formValidity){
                        e.preventDefault();
                        sessionStorage.setItem('bottomNavIndex',0);
                        $("#my-confirm").modal({
                            onConfirm: function () {
                                var arr = ['activityType','isUseGovMoney','activityBranch','meetingRecord'];
                                for(var i =0;i < arr.length; i++){
                                   sessionStorage.removeItem(arr[i]);
                                }
                                location.href='activity-manager-checkList.html';
                            },
                            onCancel: function () {
                                return false;
                            }
                        });
                    }else{
                        return false;
                    }
                }else{

                }
            }
        });
    });
</script>
</body>
</html>